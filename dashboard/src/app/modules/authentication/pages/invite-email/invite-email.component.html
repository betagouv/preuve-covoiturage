<div class="inviteEmail">
  <h2>Confirmation de votre adresse email.</h2>
  <p>Veuillez renseigner votre mot de passe</p>
  <form [formGroup]="newPasswordForm">
    <mat-form-field appearance="outline">
      <mat-label>Email</mat-label>
      <input matInput name="email" [value]="email" disabled />
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>Mot de passe</mat-label>
      <input matInput formControlName="new_password" type="password" (input)="onPasswordInput()" required />
      <mat-error *ngIf="password.hasError('required')"> Le mot de passe est invalide.</mat-error>
      <mat-error *ngIf="password.hasError('minlength')">
        Le mot de passe doit faire au minimum 6 caractères.
      </mat-error>
      <mat-error *ngIf="password.hasError('maxlength')">
        Le mot de passe ne peut pas faire plus de 128 caractères.
      </mat-error>
    </mat-form-field>
    <mat-form-field appearance="outline">
      <mat-label>Confirmation du mot de passe</mat-label>
      <input matInput formControlName="password_verification" type="password" (input)="onPasswordInput()" required />
      <mat-error *ngIf="passwordVerification.hasError('password')"> Le mot de passe est invalide.</mat-error>
      <mat-error *ngIf="passwordVerification.hasError('minlength')">
        Le mot de passe doit faire au minimum 6 caractères.
      </mat-error>
      <mat-error *ngIf="passwordVerification.hasError('maxlength')">
        Le mot de passe ne peut pas faire plus de 128 caractères.
      </mat-error>
      <mat-error
        *ngIf="
          !passwordVerification.hasError('maxlength') &&
          !passwordVerification.hasError('minlength') &&
          !passwordVerification.hasError('required') &&
          passwordVerification.hasError('passwordMismatch')
        "
        >Les mot de passe ne correspondent pas
      </mat-error>
    </mat-form-field>
    <button
      type="submit"
      mat-flat-button
      (click)="changePassword()"
      [disabled]="!newPasswordForm.valid"
      color="primary"
    >
      Envoyer
    </button>
  </form>

  <p *ngIf="hasError">
    Merci de contacter <a href="mailto:{{ contactEmail }}">{{ contactEmail }}</a>
    pour faire une demande d'accès au service.
  </p>
</div>
