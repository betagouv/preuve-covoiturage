<div class="CampaignForm">
  <mat-horizontal-stepper #stepper [linear]="true">
    <mat-step [stepControl]="templateFormGroup">
      <ng-template matStepLabel>Campagne</ng-template>
      <app-page-content>
        <div class="CampaignForm-content">
          <div class="CampaignForm-content-wrapper">
            <app-policy-form [control]="templateFormGroup.get('templateCtrl')" [matStepper]="stepper"></app-policy-form>
            <app-help-card
              [svgIcon]="helpCard.svgIcon"
              [title]="helpCard.title"
              [hint]="helpCard.hint"
              [link]="helpCard.link"
            >
            </app-help-card>
          </div>
          <div class="CampaignForm-content-actions">
            <button
              mat-flat-button
              class="large"
              color="primary"
              matStepperNext
              (click)="setCampaignTemplate()"
              [disabled]="!templateFormGroup.valid"
            >
              Étape suivante
            </button>
          </div>
        </div>
      </app-page-content>
    </mat-step>
    <mat-step [stepControl]="campaignFormGroup.get('rules')">
      <ng-template matStepLabel>Éligibilité</ng-template>
      <app-page-content>
        <div class="CampaignForm-content">
          <div class="CampaignForm-content-wrapper">
            <app-rules-form [campaignForm]="campaignFormGroup"></app-rules-form>
            <app-help-card
              [svgIcon]="helpCard.svgIcon"
              [title]="helpCard.title"
              [hint]="helpCard.hint"
              [link]="helpCard.link"
            >
            </app-help-card>
          </div>
          <div class="CampaignForm-content-actions">
            <button mat-flat-button class="large" matStepperPrevious>Étape précédente</button>
            <button
              mat-flat-button
              class="large"
              color="primary"
              matStepperNext
              [disabled]="!campaignFormGroup.get('rules').valid"
            >
              Étape suivante
            </button>
          </div>
        </div>
      </app-page-content>
    </mat-step>
    <mat-step [stepControl]="campaignFormGroup">
      <ng-template matStepLabel>Rétribution</ng-template>
      <app-page-content>
        <div class="CampaignForm-content">
          <div class="CampaignForm-content-wrapper">
            <app-parameters-form [campaignForm]="campaignFormGroup"></app-parameters-form>
            <app-help-card
              [svgIcon]="helpCard.svgIcon"
              [title]="helpCard.title"
              [hint]="helpCard.hint"
              [link]="helpCard.link"
            >
            </app-help-card>
          </div>
          <div class="CampaignForm-content-actions">
            <button mat-flat-button class="large" matStepperPrevious>Étape précédente</button>
            <button mat-flat-button class="large" color="primary" matStepperNext [disabled]="!campaignFormGroup.valid">
              Voir le récapitulatif
            </button>
          </div>
        </div>
      </app-page-content>
    </mat-step>
    <mat-step>
      <ng-template matStepLabel>Récapitulatif</ng-template>
      <app-page-content>
        <div class="CampaignForm-content">
          <div class="CampaignForm-content-wrapper CampaignForm-content-wrapper--summary">
            <app-summary-form
              [campaignForm]="campaignFormGroup"
              [loading]="loading"
              (onSaveCampaign)="saveCampaign($event)"
            ></app-summary-form>
          </div>
          <div class="CampaignForm-content-actions">
            <button mat-flat-button class="large" matStepperPrevious>Étape précédente</button>
          </div>
        </div>
      </app-page-content>
    </mat-step>
  </mat-horizontal-stepper>
</div>
